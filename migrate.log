2023-02-02T11:28:31.601Z
cwd: ~/dev/eligibility-estimate
package: govuk-prototype-kit@13.2.4
argv: ~/.nvm/versions/node/v18.13.0/bin/node ~/dev/eligibility-estimate/node_modules/.bin/govuk-prototype-kit migrate
Started [Check migration is being applied to a pre v13 prototype]
Succeeded [Check migration is being applied to a pre v13 prototype]
2023-02-02T11:28:39.392Z
cwd: ~/dev/eligibility-estimate
package: govuk-prototype-kit@13.2.4
argv: ~/.nvm/versions/node/v18.13.0/bin/node ~/dev/eligibility-estimate/node_modules/.bin/govuk-prototype-kit migrate -- ~/dev/eligibility-estimate
Started [Migrate config.js to config.json]
Started [Update application SCSS file]
Started [Deleted files that are no longer needed]
Started [Deleted directories that are no longer needed]
Started [Delete listen-on-port.js]
Started [Delete server.js]
Started [Delete start.js]
Started [Delete VERSION.txt]
Started [Delete Procfile]
Started [Delete app/assets/sass/application-ie8.scss]
Started [Delete app/assets/sass/unbranded-ie8.scss]
Started [Remove unused directory docs]
Started [Remove unused directory lib]
Started [Remove unused directory public]
Succeeded [Migrate config.js to config.json]
Succeeded [Delete start.js]
Succeeded [Delete listen-on-port.js]
Succeeded [Delete server.js]
Succeeded [Delete app/assets/sass/application-ie8.scss]
Succeeded [Delete VERSION.txt]
Succeeded [Delete app/assets/sass/unbranded-ie8.scss]
Succeeded [Delete Procfile]
Succeeded [Remove unused directory public]
Succeeded [Deleted files that are no longer needed]
Started [Overwrite app/views/layout.html]
Found [// Add your routes here - above the module.exports line] in [app/routes.js], replacing
Started [Overwrite app/filters.js]
Started [Delete app/assets/images/separator-2x.png]
Started [Overwrite app/assets/javascripts/application.js]
Started [Delete app/assets/images/unbranded.ico]
Started [Delete app/assets/images/separator.png]
Started [Delete app/assets/javascripts/auto-store-data.js]
Started [Delete app/views/layout_unbranded.html]
Started [Delete app/assets/sass/unbranded.scss]
Started [Delete app/views/includes/breadcrumb_examples.html]
Started [Delete app/assets/sass/patterns/_contents-list.scss]
Started [Delete app/assets/sass/patterns/_mainstream-guide.scss]
Started [Delete app/assets/javascripts/jquery-1.11.3.js]
Started [Delete app/assets/sass/patterns/_pagination.scss]
Started [Delete app/assets/sass/patterns/_task-list.scss]
Started [Delete app/assets/sass/patterns/_step-by-step-header.scss]
Failed [Overwrite app/views/layout.html]
Started [Delete app/assets/sass/patterns/_step-by-step-nav.scss]
Keeping these lines from old file
Failed [Overwrite app/filters.js]
Found [// Add extra styles here, or re-organise the Sass files in whichever way makes most sense to you] in [app/assets/sass/application.scss], replacing
Started [Delete app/assets/sass/patterns/_step-by-step-related.scss]
Started [Delete app/assets/sass/patterns/_related-items.scss]
Failed [Overwrite app/assets/javascripts/application.js]
Failed [Overwrite app/filters.js]
Keeping these lines from old file
Failed [Overwrite app/assets/javascripts/application.js]
Succeeded [Delete app/assets/images/separator-2x.png]
Succeeded [Delete app/assets/images/unbranded.ico]
Succeeded [Delete app/assets/sass/unbranded.scss]
Succeeded [Delete app/views/includes/breadcrumb_examples.html]
Succeeded [Delete app/assets/sass/patterns/_contents-list.scss]
Succeeded [Delete app/assets/sass/patterns/_pagination.scss]
Succeeded [Delete app/assets/javascripts/jquery-1.11.3.js]
Succeeded [Delete app/assets/javascripts/auto-store-data.js]
Succeeded [Delete app/views/layout_unbranded.html]
Succeeded [Delete app/assets/sass/patterns/_step-by-step-header.scss]
Succeeded [Delete app/assets/images/separator.png]
Succeeded [Delete app/assets/sass/patterns/_mainstream-guide.scss]
Succeeded [Delete app/assets/sass/patterns/_task-list.scss]
Succeeded [Delete app/assets/sass/patterns/_step-by-step-nav.scss]
Succeeded [Delete app/assets/sass/patterns/_step-by-step-related.scss]
Succeeded [Delete app/assets/sass/patterns/_related-items.scss]
Succeeded [Update application SCSS file]
Started [Delete app/views/includes/scripts.html]
Started [Delete app/views/includes/head.html]
//,// For guidance on how to create routes see:,// https://prototype-kit.service.gov.uk/docs/create-routes,//,,const govukPrototypeKit = require('govuk-prototype-kit'),const router = govukPrototypeKit.requests.setupRouter(),,// Add your routes here,,// Run this code when a form is submitted to 'check-for-benefits',//NOT USING THE CHECK-FOR-BENEFITS ROUTE IN ITERATION 4,router.post('/check-for-benefits', function (req, res) {,,  // Make a variable and give it the value from 'passport-benefits',  var passportingBenefits = req.session.data['passport-benefits'],,  // Check whether the variable matches a condition,  if (passportingBenefits == "Yes"){,    // Skip income and outgoings and send user to property q's,    res.redirect('/client-property'),  } else {,    // Send user to income to answer all financial q's,    res.redirect('/monthly-income'),  },,}),,//Eligibility question at the start,router.post('/eligibility-branching', function (req, res) {,,  // Make a variable and give it the value from 'passport-benefits',  var signpostedUser = req.session.data['intended-user'],,  // Check whether the variable matches a condition,  if (signpostedUser == "Yes"){,    // Skip income and outgoings and send user to property q's,    res.redirect('/case-choice-details'),  } else {,    // Send user to income to answer all financial q's,    res.redirect('/signpost-eligibility'),  },,}),,//Eligibility question at the start,router.post('/client-benefits-decide', function (req, res) {,,  // Make a variable and give it the value from 'passport-benefits',  var firstBenefit = req.session.data['client-benefits'],,  // Check whether the variable matches a condition,  if (firstBenefit == "Yes"){,    // Skip income and outgoings and send user to property q's,    res.redirect('/client-benefits-entry'),  } else {,    // Send user to income to answer all financial q's,    res.redirect('/client-income'),  },,}),,//Eligibility question at the start,router.post('/client-benefits-decide-1', function (req, res) {,,  // Make a variable and give it the value from 'passport-benefits',  var firstBenefit = req.session.data['has_other_benefits'],,  // Check whether the variable matches a condition,  if (firstBenefit == "Yes"){,    // Skip income and outgoings and send user to property q's,    res.redirect('/client-benefits-entry-2'),  } else {,    // Send user to income to answer all financial q's,    res.redirect('/client-income'),  },,}),,//Eligibility question at the start,router.post('/partner-benefits-decide', function (req, res) {,,  // Make a variable and give it the value from 'passport-benefits',  var parnerFirstBenefit = req.session.data['partner-benefits'],,  // Check whether the variable matches a condition,  if (parnerFirstBenefit == "Yes"){,    // Skip income and outgoings and send user to property q's,    res.redirect('/partner-benefits-entry'),  } else {,    // Send user to income to answer all financial q's,    res.redirect('/partner-income'),  },,}),,//Eligibility question at the start,router.post('/partner-benefits-decide-1', function (req, res) {,,  // Make a variable and give it the value from 'passport-benefits',  var parnerFirstBenefit = req.session.data['partner-has_other_benefits'],,  // Check whether the variable matches a condition,  if (parnerFirstBenefit == "Yes"){,    // Skip income and outgoings and send user to property q's,    res.redirect('/partner-benefits-entry-2'),  } else {,    // Send user to income to answer all financial q's,    res.redirect('/partner-income'),  },,}),,,// Run this code when a form is submitted to 'ownsHome',router.post('/ownsHome', function (req, res) {,,  // Make a variable and give it the value from 'homeowner',  var ownsHome = req.session.data['homeowner'],,  // Check whether the variable matches a condition,  if (ownsHome == "No"){,    // Skip property q's and go to vehicle q's,    res.redirect('/client-vehicle-1'),  } else {,    // Send user to property q's to answer all financial q's,    res.redirect('/client-property-entry'),  },,  }),,// Run this code when a form is submitted to 'ownsHomePartner',router.post('/ownsHomePartner', function (req, res) {,,  // Make a variable and give it the value from 'homeowner',  var ownsHomePartner = req.session.data['partner-homeowner'],,  // Check whether the variable matches a condition,  if (ownsHomePartner == "No"){,    // Skip property q's and go to vehicle q's,    res.redirect('/partner-vehicle-1'),  } else {,    // Send user to property q's to answer all financial q's,    res.redirect('/partner-property-entry'),  },,  }),,// Run this code when a form is submitted to 'ownsVehicle',router.post('/ownsVehicle', function (req, res) {,,  // Make a variable and give it the value from 'client-vehicle-own',  var ownsVehicle = req.session.data['client-vehicle-own'],,  // Check whether the variable matches a condition,  if (ownsVehicle == "No"){,    // Skip vehicle q's and go to assets q's,    res.redirect('/client-assets'),  } else {,    // Send user to vehicle q's to answer all financial q's,    res.redirect('/client-vehicle-2'),  },,  }),,// Run this code when a form is submitted to 'ownsVehiclePartner',router.post('/ownsVehiclePartner', function (req, res) {,,  // Make a variable and give it the value from 'partner-vehicle-own',  var ownsVehiclePartner = req.session.data['partner-vehicle-own'],,  // Check whether the variable matches a condition,  if (ownsVehiclePartner == "No"){,    // Skip vehicle q's and go to assets q's,    res.redirect('/partner-assets'),  } else {,    // Send user to vehicle q's to answer all financial q's,    res.redirect('/partner-vehicle-2'),  },,  }),,// Run this code when a form is submitted to 'regularUseVehicle',router.post('/regularUseVehicle', function (req, res) {,,  // Make a variable and give it the value from 'client-vehicle-use',  var regularUseVehicle = req.session.data['client-vehicle-use'],,  // Check whether the variable matches a condition,  if (regularUseVehicle == "No"){,    // Skip vehicle q's and go to assets q's,    res.redirect('/client-assets'),  } else {,    // Send user to next vehicle q to answer all financial q's,    res.redirect('/client-vehicle-3'),  },,  }),,// Run this code when a form is submitted to 'partnerRegularUseVehicle',router.post('/partnerRegularUseVehicle', function (req, res) {,,  // Make a variable and give it the value from 'partner-vehicle-use',  var partnerRegularUseVehicle = req.session.data['partner-vehicle-use'],,  // Check whether the variable matches a condition,  if (partnerRegularUseVehicle == "No"){,    // Skip vehicle q's and go to assets q's,    res.redirect('/partner-assets'),  } else {,    // Send user to next vehicle q to answer all financial q's,    res.redirect('/partner-vehicle-3'),  },,  }),,  // Run this code when a form is submitted to 'buyVehicleThree',  router.post('/buyVehicleThree', function (req, res) {,,    // Make a variable and give it the value from 'client-vehicle-three',    var buyVehicleThree = req.session.data['client-vehicle-three'],,    // Check whether the variable matches a condition,    if (buyVehicleThree == "Yes"){,      // Skip vehicle q's and go to assets q's,      res.redirect('/client-assets'),    } else {,      // Send user to next vehicle q to answer all financial q's,      res.redirect('/client-vehicle-4'),    },,    }),,// Run this code when a form is submitted to 'partnerBuyVehicleThree',router.post('/partnerBuyVehicleThree', function (req, res) {,,  // Make a variable and give it the value from 'client-vehicle-three',  var partnerBuyVehicleThree = req.session.data['partner-vehicle-three'],,  // Check whether the variable matches a condition,  if (partnerBuyVehicleThree == "Yes"){,    // Skip vehicle q's and go to assets q's,    res.redirect('/partner-assets'),  } else {,    // Send user to next vehicle q to answer all financial q's,    res.redirect('/partner-vehicle-4'),  },,  }),,,  // Run this code when a form is submitted to 'testOwnsHomeThree',  router.post('/testOwnsHomeThree', function (req, res) {,,    // Make a variable and give it the value from 'homeowner',    var testOwnsHomeThree = req.session.data['homeowner'],,    // Check whether the variable matches a condition,    if (testOwnsHomeThree == "No"){,      // Skip property q's and go to check answers,      res.redirect('/test-check-answers'),    } else {,      // Send user to next property entry,      res.redirect('/test-client-property-entry-joint'),    },,    }),,    // Run this code when a form is submitted to 'testOwnsVehicleThree',    router.post('/testOwnsVehicleThree', function (req, res) {,,      // Make a variable and give it the value from 'homeowner',      var testOwnsVehicleThree = req.session.data['client-vehicle-own'],,      // Check whether the variable matches a condition,      if (testOwnsVehicleThree == "No"){,        // Skip property q's and go to check answers,        res.redirect('/test-check-answers'),      } else {,        // Send user to next property entry,        res.redirect('/test-client-vehicle-entry'),      },,      }),,      //does the client have a partner,      router.post('/client-partner-decide', function (req, res) {,,        // Make a variable and give it the value from 'passport-benefits',        var hasPartner = req.session.data['client-partner'],,        // Check whether the variable matches a condition,        if (hasPartner == "Yes"){,          // display page with client and partner q's,          res.redirect('/test-client-partner-details'),        } else {,          // display page with client q's,          res.redirect('/test-client-details'),        },,      }),,      //merits 2,      router.post('/determine-merits-2', function (req, res) {,,        // Make a variable and give it the value from 'home-own',        var ownsHome = req.session.data['home-own'],,        // Check whether the variable matches a condition,        if (ownsHome == "No"){,          // display next merits q,          res.redirect('/merits-3'),        } else {,          // display page with,          res.redirect('https://checklegalaid.service.gov.uk/legal-aid-available'),        },,      }),,      //merits 3,      router.post('/determine-merits-3', function (req, res) {,,        // Make a variable and give it the value from 'home-own',        var rentsHome = req.session.data['rented'],,        // Check whether the variable matches a condition,        if (rentsHome == "No"){,          // display next merits q,          res.redirect('/merits-4'),        } else {,          // display page with,          res.redirect('https://checklegalaid.service.gov.uk/legal-aid-available'),        },,      }),,      //merits 4,      router.post('/determine-merits-4', function (req, res) {,,        // Make a variable and give it the value from 'home-own',        var isHomeless = req.session.data['homeless'],,        // Check whether the variable matches a condition,        if (isHomeless == "No"){,          // display next merits q,          res.redirect('/merits-5'),        } else {,          // display page with,          res.redirect('https://checklegalaid.service.gov.uk/legal-aid-available'),        },,      }),,      //merits 5 YES,      router.post('/determine-merits-5', function (req, res) {,,        // Make a variable and give it the value from 'home-own',        var oweMoney = req.session.data['owe-money'],,        // Check whether the variable matches a condition,        if (oweMoney == "No"){,          // display next merits q,          res.redirect('https://checklegalaid.service.gov.uk/scope/refer/debt'),        } else {,          // display page with,          res.redirect('https://checklegalaid.service.gov.uk/scope/refer/debt'),        },,      }),,,  ///////////////////////////////////,  // V2 routes here,,,module.exports = router,
Found [module.exports = router;,module.exports = router] in [app/routes.js], removing
Succeeded [Remove unused directory lib]
Succeeded [Delete app/views/includes/scripts.html]
Succeeded [Delete app/views/includes/head.html]
Succeeded [Remove unused directory docs]
Succeeded [Update routes file]
Succeeded [Deleted directories that are no longer needed]
Started [Remove old pattern includes from application SCSS file]
Succeeded [Remove old pattern includes from application SCSS file]
Started [Remove empty directory app/assets/sass/patterns]
Started [Remove empty directory app/assets/images]
Started [Remove empty directory app/views/includes]
Skipped deleting app/assets/images
Succeeded [Remove empty directory app/assets/sass/patterns]
Succeeded [Remove empty directory app/views/includes]
